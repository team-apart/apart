{% extends "base.html" %} {# 공통 레이아웃 상속: head/공통 스크립트/헤더 포함 #}
{% block title %}BBS_insert{% endblock %} {# 페이지 탭/SEO용 제목 #}

{% block scripts %}
<style>
  .form-wrap { max-width: 820px; margin: 24px auto; }
  .form-table th { width: 140px; white-space: nowrap; background: #fffbe6; }
  .form-table td input.form-control, .form-table td textarea.form-control { width: 100%; }
  .form-table textarea { min-height: 240px; resize: vertical; }
</style>
{% endblock %}

{% block content %}
  {# 본문 콘텐츠 시작 #}
  <h2>bbs</h2>

  {# 목록/홈 이동: 단순 네비게이션 링크 #}
  <a href="/bbs/bbs_list">
      <button type="button" class="btn btn-primary">bbs list</button>
  </a>
  <a href="/">
      <button type="button" class="btn btn-danger">home</button>
  </a>

  <hr color="red">

  <div class="form-wrap">
    <div class="card shadow-sm">
      <div class="card-body">

        {# 상단 이미지(시각적 배너). 정적 파일 경로는 StaticFiles에서 서빙됨 #}
        <img src="/static/img/img2.jpg" style="width:100%;max-height:200px;object-fit:cover;border-radius:.25rem;" alt="bbs image">

        {# 이 화면은 "읽기/상세" 성격: 현재 form 태그 없이 read-only 필드들로 값만 표시 #}
        <table class="table table-bordered align-middle form-table mb-3">
          <colgroup>
            <col style="width:140px;">
            <col>
          </colgroup>
          <tbody>

            {# 글 번호 노출 행
               - 주의: label for="title" 로 되어 있으나 실제 필드 id는 "no" → 접근성/시멘틱 측면에서 for/id 매칭 필요
               - readonly로 표시만, 수정 불가 #}
            <tr>
              <th scope="row">
                <label for="title" class="form-label mb-0">Title</label> {# 실제로는 "No" 라벨이 더 적절 #}
              </th>
              <td>
                <input
                  type="text"
                  class="form-control"
                  id="no"
                  name="no"
                  readonly
                  minlength="1"
                  maxlength="200"
                  value="{{row.no}}"
                >
              </td>
            </tr>

            {# 제목 노출 행: /bbs/bbs_read/{no} 화면에서 읽기 전용으로 표시 #}
            <tr>
              <th scope="row">
                <label for="title" class="form-label mb-0">Title</label>
              </th>
              <td>
                <input
                  type="text"
                  class="form-control"
                  id="title"
                  name="title"
                  readonly
                  minlength="1"
                  maxlength="200"
                  value="{{row.title}}"
                >
              </td>
            </tr>

            {# 본문 노출 행: textarea 읽기 전용
               - 서버 출력 시 XSS 방지 위해 escape 여부 확인 필요(보안 정책에 따름)
               - 길면 스크롤/높이 조절 #}
            <tr>
              <th scope="row">
                <label for="content" class="form-label mb-0">Content</label>
              </th>
              <td>
                <textarea
                  class="form-control"
                  id="content"
                  name="content"
                  readonly
                  minlength="1"
                  maxlength="5000">{{row.content}}</textarea>
              </td>
            </tr>

            {# 작성자 노출 행:
               - value 속성이 두 번 정의되어 있어(apple, {{row.writer}}) 브라우저는 마지막 값을 사용
               - 불필요한 기본값 "apple"은 제거하는 편이 명확 #}
            <tr>
              <th scope="row">
                <label for="writer" class="form-label mb-0">Writer</label>
              </th>
              <td>
                <input
                  type="text"
                  class="form-control"
                  id="writer"
                  name="writer"
                  readonly
                  minlength="1"
                  value="apple"            {# ⚠️ 중복 value. 아래 value가 최종 적용됨 #}
                  maxlength="50"
                  value="{{row.writer}}"
                >
              </td>
            </tr>

            {# 액션 버튼 묶음:
               - List: 목록으로 이동
               - Update: GET /bbs/bbs_update/{no} 수정 폼으로 이동
               - Delete: POST /bbs/bbs_delete/{no} 삭제(확인창)
               - CSRF를 적용한다면 hidden 토큰 필드를 추가해야 함 #}
            <tr>
              <td class="text-center" colspan="2">
                <div class="d-flex gap-1 justify-content-center">
                  <a class="btn btn-sm btn-outline-success" href="/bbs/bbs_list">List</a>
                  <a class="btn btn-sm btn-outline-primary" href="/bbs/bbs_update/{{ row.no }}">Update</a>
                  <form action="/bbs/bbs_delete/{{ row.no }}" method="post" onsubmit="return confirm('삭제하시겠습니까?');">
                    <!-- CSRF를 쓰는 경우 hidden 필드 추가 -->
                    {# <input type="hidden" name="csrf_token" value="{{ csrf_token }}"> #}
                    <button type="submit" class="btn btn-sm btn-outline-danger">Delete</button>
                  </form>
                </div>
              </td>
            </tr>

          </tbody>
        </table>
      </div>
    </div>
  </div>
{% endblock %}
